function A(n){var s=n.match(/^(?:(\d+)\s+)?(.*?)((?:\s-[A-Za-z]+(?:=\S*)?)*)?$/),c=isNaN(a)?1:a,r=t(s[3]),o=r.get('l');if(s==null)return;const a=parseInt(s[1]);r.delete('l');return{name:s[2],quantity:c,language:o,customFlags:r}}function t(t){const n=new Map();if(!t)return n;var s=t.matchAll(/\s-([a-zA-Z]+)(?:=(\S*))?/g);s.forEach(t=>n.set(t[1],t[2]||'true'));return n}var e=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/,n=/^[\dA-Za-z]{3,5}\/[^/]+(?:\/(?:[A-Za-z]{2,3})?)?$/,_=['en','es','fr','de','it','pt','ja','ko','ru','zhs','zht'],a='https://api.scryfall.com';function r(e){return new Promise(n=>setTimeout(n,e))}async function h(s){let r;if(e.test(s.name))r=`${a}/cards/${s.name}`;else if(n.test(s.name)){let e=s.name;(s.language!=null&&_.includes(s.language))&&(e=s.name.split('/').slice(0,2).join('/')+`/${s.language}`);r=`${a}/cards/${e}`}else r=`${a}/cards/named/?fuzzy=${encodeURIComponent(s.name)}`;const o=fetch(r);var u=await o;if(u.ok)return await u.json()}async function o(e,n=!1,t=!0){var s=await fetch(n?`${e.prints_search_uri}&include_multilingual=true`:e.prints_search_uri);if(s.ok)return await s.json().then(e=>e.data).then(e=>t?e.filter(e=>e.games.includes('paper')):e)}async function j(e){return await Promise.all(e.map((e,n)=>r(n*100).then(()=>h(e))))}function k(e,n){const t=[];e.forEach((e,a)=>{t.push(r(a*100).then(()=>h({name:e.name,quantity:e.quantity,language:e.language,customFlags:e.customFlags}).then(t=>n(e,t))))});return Promise.all(t).then()}function l(e,n,t=!1,a=!0){var u=[];e.forEach((e,i)=>{u.push(r(i*100).then(()=>h({name:e.name,quantity:e.quantity,language:e.language,customFlags:e.customFlags})).then(e=>e!==void 0?o(e,t,a):Promise.resolve(void 0)).then(t=>n(e,t)))});return Promise.all(u).then()}
